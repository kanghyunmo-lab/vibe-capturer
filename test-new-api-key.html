<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒˆ API í‚¤ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Consolas', monospace;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }

        h1 {
            color: #a29bfe;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            background: #a29bfe;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            margin: 20px 0;
        }

        button:hover {
            background: #6c5ce7;
        }

        #result {
            margin-top: 20px;
            padding: 20px;
            background: #16213e;
            border-radius: 5px;
            white-space: pre-wrap;
            font-size: 14px;
        }

        .success {
            color: #00d2d3;
        }

        .error {
            color: #ff4757;
        }
    </style>
</head>

<body>
    <h1>ğŸ”‘ ìƒˆ API í‚¤ í…ŒìŠ¤íŠ¸</h1>
    <p>ìƒˆë¡œ ë°œê¸‰ë°›ì€ API í‚¤ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>

    <button onclick="testAPI()">API í…ŒìŠ¤íŠ¸ ì‹œì‘</button>

    <div id="result"></div>

    <script>
        const NEW_API_KEY = 'AIzaSyAx_mcH4gxwkX5Etw56WeX4QmKk34ilkog';

        async function testAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'â³ í…ŒìŠ¤íŠ¸ ì¤‘...\n\n';

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro-latest:generateContent?key=${NEW_API_KEY}`;

            try {
                log('ğŸ“ í…ŒìŠ¤íŠ¸ URL:');
                log(url.replace(NEW_API_KEY, 'YOUR_API_KEY'));
                log('\nğŸ§ª API í˜¸ì¶œ ì¤‘...\n');

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: 'ì•ˆë…•í•˜ì„¸ìš”, ê°„ë‹¨íˆ ì¸ì‚¬í•´ì£¼ì„¸ìš”.'
                            }]
                        }]
                    })
                });

                const data = await response.json();

                log(`ğŸ“Š HTTP ìƒíƒœ: ${response.status} ${response.statusText}\n`);

                if (response.ok) {
                    const responseText = data.candidates?.[0]?.content?.parts?.[0]?.text || 'ì‘ë‹µ ì—†ìŒ';
                    log('âœ… ì„±ê³µ!', 'success');
                    log(`\nAPI ì‘ë‹µ:\n${responseText}\n`, 'success');
                    log('\nğŸ‰ ìƒˆ API í‚¤ê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!', 'success');
                } else {
                    log('âŒ ì‹¤íŒ¨', 'error');
                    log(`\nì˜¤ë¥˜ ìƒì„¸:\n${JSON.stringify(data, null, 2)}`, 'error');

                    if (data.error?.message?.includes('quota') || data.error?.message?.includes('429')) {
                        log('\nâš ï¸ ì´ API í‚¤ë„ í• ë‹¹ëŸ‰ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.', 'error');
                        log('\nê°€ëŠ¥í•œ ì›ì¸:', 'error');
                        log('1. ì´ API í‚¤ë¥¼ ì´ë¯¸ ë‹¤ë¥¸ ê³³ì—ì„œ ë§ì´ ì‚¬ìš©í•¨');
                        log('2. Google ê³„ì •ì˜ ì „ì²´ í• ë‹¹ëŸ‰ ì œí•œ');
                        log('3. í”„ë¡œì íŠ¸ ë‹¨ìœ„ í• ë‹¹ëŸ‰ ì œí•œ');
                        log('\ní•´ê²° ë°©ë²•:');
                        log('1. ë‹¤ë¥¸ Google ê³„ì •ìœ¼ë¡œ ìƒˆ API í‚¤ ë°œê¸‰');
                        log('2. Google Cloud Consoleì—ì„œ í• ë‹¹ëŸ‰ í™•ì¸');
                        log('3. ìœ ë£Œ í”Œëœ ê³ ë ¤');
                    } else if (data.error?.message?.includes('API key')) {
                        log('\nâš ï¸ API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
                        log('\ní•´ê²° ë°©ë²•:');
                        log('1. API í‚¤ë¥¼ ë‹¤ì‹œ í™•ì¸');
                        log('2. ìƒˆ API í‚¤ ì¬ë°œê¸‰');
                    }
                }

            } catch (error) {
                log('âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜', 'error');
                log(`\n${error.message}`, 'error');
            }
        }

        function log(message, type = '') {
            const resultDiv = document.getElementById('result');
            const className = type ? ` class="${type}"` : '';
            resultDiv.innerHTML += `<div${className}>${escapeHtml(message)}</div>`;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>

</html>