<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini API ì „ì²´ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }

        h1 {
            color: #a29bfe;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            background: #a29bfe;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            margin: 20px 0;
        }

        button:hover {
            background: #6c5ce7;
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        #results {
            margin-top: 20px;
            padding: 20px;
            background: #16213e;
            border-radius: 5px;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.6;
        }

        .success {
            color: #00d2d3;
            font-weight: bold;
        }

        .error {
            color: #ff4757;
        }

        .info {
            color: #ffa502;
        }

        .section {
            border-left: 3px solid #a29bfe;
            padding-left: 10px;
            margin: 15px 0;
        }
    </style>
</head>

<body>
    <h1>ğŸ§ª Gemini API ì „ì²´ í…ŒìŠ¤íŠ¸</h1>
    <p>ëª¨ë“  ëª¨ë¸ê³¼ API ë²„ì „ì„ í…ŒìŠ¤íŠ¸í•˜ì—¬ ì‘ë™í•˜ëŠ” ì¡°í•©ì„ ì°¾ìŠµë‹ˆë‹¤.</p>

    <button id="testBtn" onclick="runTests()">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>

    <div id="results"></div>

    <script>
        const API_KEY = 'AIzaSyDjeivNn-fOTFQGrfCL02nkRWekAJcX8QM';
        const resultsDiv = document.getElementById('results');
        const testBtn = document.getElementById('testBtn');

        async function runTests() {
            testBtn.disabled = true;
            resultsDiv.innerHTML = '<div class="info">â³ í…ŒìŠ¤íŠ¸ ì‹œì‘...</div>\n\n';

            const modelsToTest = [
                'gemini-pro',
                'gemini-1.5-pro',
                'gemini-1.5-flash',
                'gemini-1.5-flash-latest',
                'gemini-2.0-flash-exp',
                'models/gemini-pro',
                'models/gemini-1.5-pro',
                'models/gemini-1.5-flash'
            ];

            const apiVersions = ['v1beta', 'v1'];

            let successfulCombinations = [];

            for (const version of apiVersions) {
                log(`\n${'='.repeat(60)}`);
                log(`ğŸ“ API ë²„ì „: ${version}`, 'info');
                log('='.repeat(60));

                for (const model of modelsToTest) {
                    const url = `https://generativelanguage.googleapis.com/${version}/models/${model}:generateContent?key=${API_KEY}`;

                    try {
                        log(`\nğŸ§ª í…ŒìŠ¤íŠ¸: ${version}/${model}`);

                        const response = await fetch(url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{
                                        text: 'ì•ˆë…•í•˜ì„¸ìš”'
                                    }]
                                }]
                            })
                        });

                        const data = await response.json();

                        if (response.ok) {
                            const responseText = data.candidates?.[0]?.content?.parts?.[0]?.text || 'ì‘ë‹µ ì—†ìŒ';
                            log(`âœ… ì„±ê³µ!`, 'success');
                            log(`   ì‘ë‹µ: ${responseText.substring(0, 100)}...`);
                            successfulCombinations.push({ version, model, url });
                        } else {
                            log(`âŒ ì‹¤íŒ¨: ${response.status} ${response.statusText}`, 'error');
                            log(`   ì˜¤ë¥˜: ${data.error?.message || JSON.stringify(data).substring(0, 200)}`);
                        }

                    } catch (error) {
                        log(`âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`, 'error');
                    }

                    // API í˜¸ì¶œ ì œí•œ ë°©ì§€
                    await sleep(800);
                }
            }

            // ê²°ê³¼ ìš”ì•½
            log(`\n\n${'='.repeat(60)}`);
            log('ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½', 'info');
            log('='.repeat(60));

            if (successfulCombinations.length > 0) {
                log(`\nâœ… ì„±ê³µí•œ ì¡°í•©: ${successfulCombinations.length}ê°œ\n`, 'success');
                successfulCombinations.forEach((combo, index) => {
                    log(`${index + 1}. ${combo.version}/${combo.model}`, 'success');
                    log(`   URL: ${combo.url.replace(API_KEY, 'YOUR_API_KEY')}\n`);
                });

                log('\nğŸ¯ ê¶Œì¥ ì‚¬í•­:', 'info');
                const recommended = successfulCombinations[0];
                log(`app.jsì—ì„œ ë‹¤ìŒ URLì„ ì‚¬ìš©í•˜ì„¸ìš”:`, 'success');
                log(`https://generativelanguage.googleapis.com/${recommended.version}/models/${recommended.model}:generateContent?key=\${API_KEY}`, 'success');
            } else {
                log('\nâŒ ì‘ë™í•˜ëŠ” ëª¨ë¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.', 'error');
                log('\nê°€ëŠ¥í•œ ì›ì¸:', 'error');
                log('1. API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŒ');
                log('2. API í‚¤ê°€ í™œì„±í™”ë˜ì§€ ì•ŠìŒ');
                log('3. Gemini APIê°€ í™œì„±í™”ë˜ì§€ ì•ŠìŒ');
                log('4. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¬¸ì œ');
                log('\ní•´ê²° ë°©ë²•:');
                log('1. https://makersuite.google.com/app/apikey ì—ì„œ ìƒˆ API í‚¤ ë°œê¸‰');
                log('2. Google Cloud Consoleì—ì„œ Gemini API í™œì„±í™”');
            }

            testBtn.disabled = false;
        }

        function log(message, type = '') {
            const className = type ? `class="${type}"` : '';
            resultsDiv.innerHTML += `<div ${className}>${escapeHtml(message)}</div>`;
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>

</html>